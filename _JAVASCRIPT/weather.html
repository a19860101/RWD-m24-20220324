<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <select name="" id="city">
        <option value="">--請選擇--</option>
        <option value="taipei">台北</option>
        <option value="tokyo">東京</option>
        <option value="osaka">大阪</option>
        <option value="bangkok">曼谷</option>
        <option value="seoul">首爾</option>
    </select>
    <div class="container">
        <div class="wDate"></div>
        <div>現在天氣 <span class="desc"></span> </div>
        <div>氣溫為<span class="temp"></span>&deg;C </div>
        <div>最高溫為<span class="max"></span>&deg;C</div>
        <div>最低溫為<span class="min"></span>&deg;C</div>
        <div>濕度為<span class="humidity"></span>%</div>
        <div>
            資料時間 <span class="wTime"></span>
        </div>
    </div>
    <!-- b1ecbccd638b763d489602917ba47cc3 -->
    <script>
        let city = document.querySelector('#city');
        city.onchange = e => {
            console.log(e.target.value);
            let q = e.target.value;
            // 攝氏 metric,華氏 imperial
            let url = `https://api.openweathermap.org/data/2.5/weather?q=${q}&appid=b1ecbccd638b763d489602917ba47cc3&units=metric&lang=zh_TW`;
            document.querySelector('.desc').textContent = '';
            fetch(url)
            .then(res => res.json())
            .then(data => {
                console.log(data)
                let desc = document.querySelector('.desc');
                desc.append(data.weather[0].description);
                let temp = document.querySelector('.temp');
                temp.append(data.main.temp)
                document.querySelector('.max').append(data.main.temp_max);
                document.querySelector('.min').append(data.main.temp_min);
                document.querySelector('.humidity').append(data.main.humidity);
                let myDate = new Date(data.dt * 1000);
                let y = myDate.getFullYear();
                let m = myDate.getMonth()+1;
                let d = myDate.getDate();
                let D = myDate.getDay();
                let hours = myDate.getHours();
                let minutes = myDate.getMinutes();
                let seconds = myDate.getSeconds();
                let day = ['日','一','二','三','四','五','六'];
                let day_jp = ['日','月','火','水','木','金','土'];
                // let weatherDate = y +'-'+ m +'-' + d;
                // let weatherTime = hours+':'+minutes+':'+seconds;
                let weatherDate = `${y}-${m}-${d} (星期${day[D]})`;
                let weatherTime = `${hours}:${minutes}:${seconds}`;
                console.log(weatherDate);
                console.log(weatherTime);
                document.querySelector('.wDate').append(weatherDate);
                document.querySelector('.wTime').append(weatherTime);
                //字串樣板
                console.log(`現在日期${weatherDate}`);
            })
        }
    </script>
</body>
</html>